\hypertarget{e2e_8py_source}{}\section{/home/hilton/github/exch2exh/e2e.py}

\begin{DoxyCode}
\hypertarget{e2e_8py_source.tex_l00001}{}\hyperlink{namespacee2e}{00001} \textcolor{comment}{#! /usr/bin/env python3}
00002 \textcolor{comment}{# -*- coding: utf-8 -*-}
00003 \textcolor{stringliteral}{"""}
00004 \textcolor{stringliteral}{Created on Thu Aug 17 12:30:41 2017}
00005 \textcolor{stringliteral}{}
00006 \textcolor{stringliteral}{@author: hilton}
00007 \textcolor{stringliteral}{From:}
00008 \textcolor{stringliteral}{* Argparse Tutorial}
00009 \textcolor{stringliteral}{  https://docs.python.org/3.5/howto/argparse.html}
00010 \textcolor{stringliteral}{"""}
00011 
00012 \textcolor{keyword}{import} sys      \textcolor{comment}{# argv, exit()}
00013 \textcolor{keyword}{import} rates    \textcolor{comment}{# Google, XRates}
00014 \textcolor{keyword}{import} argparse \textcolor{comment}{# ArgumentParser, }
00015 \textcolor{keyword}{import} datetime \textcolor{comment}{# datetime}
00016 
00017 \textcolor{keyword}{import} gen\_factory \textcolor{comment}{# GenFactory}
00018 \textcolor{keyword}{import} exchange    \textcolor{comment}{# Exchange}
00019 
\hypertarget{e2e_8py_source.tex_l00020}{}\hyperlink{classe2e_1_1_args}{00020} \textcolor{keyword}{class }\hyperlink{classe2e_1_1_args}{Args}: 
00021     \textcolor{keywordflow}{pass}
00022 
\hypertarget{e2e_8py_source.tex_l00023}{}\hyperlink{classe2e_1_1_parameters}{00023} \textcolor{keyword}{class }\hyperlink{classe2e_1_1_parameters}{Parameters}:
\hypertarget{e2e_8py_source.tex_l00024}{}\hyperlink{classe2e_1_1_parameters_a335faddfa9af3ed8ac441e92faec0946}{00024}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a335faddfa9af3ed8ac441e92faec0946}{\_\_init\_\_} (self):
\hypertarget{e2e_8py_source.tex_l00025}{}\hyperlink{classe2e_1_1_parameters_a1f4bab2e746d2c598e20ccba0154d795}{00025}         self.\hyperlink{classe2e_1_1_parameters_a1f4bab2e746d2c598e20ccba0154d795}{summaryOutput}        = \textcolor{keywordtype}{None}
\hypertarget{e2e_8py_source.tex_l00026}{}\hyperlink{classe2e_1_1_parameters_ad5967b78ebf5c8778e423413053015a7}{00026}         self.\hyperlink{classe2e_1_1_parameters_ad5967b78ebf5c8778e423413053015a7}{conclusionOutput}     = \textcolor{keywordtype}{None}
\hypertarget{e2e_8py_source.tex_l00027}{}\hyperlink{classe2e_1_1_parameters_aaa2b41d7017ab4893bbe27fa8edb7180}{00027}         self.\hyperlink{classe2e_1_1_parameters_aaa2b41d7017ab4893bbe27fa8edb7180}{mainRates}            = \textcolor{keywordtype}{None}
\hypertarget{e2e_8py_source.tex_l00028}{}\hyperlink{classe2e_1_1_parameters_a60eeea35185af8b13a6ea9d797a38dc7}{00028}         self.\hyperlink{classe2e_1_1_parameters_a60eeea35185af8b13a6ea9d797a38dc7}{allRates}             = \textcolor{keywordtype}{None}
\hypertarget{e2e_8py_source.tex_l00029}{}\hyperlink{classe2e_1_1_parameters_a552470d8541b7caf2bb8940e32a6fe0e}{00029}         self.\hyperlink{classe2e_1_1_parameters_a552470d8541b7caf2bb8940e32a6fe0e}{mainRatesOutput}      = \textcolor{keywordtype}{None}
\hypertarget{e2e_8py_source.tex_l00030}{}\hyperlink{classe2e_1_1_parameters_ac5dfd879a297879921d905de68f7febb}{00030}         self.\hyperlink{classe2e_1_1_parameters_ac5dfd879a297879921d905de68f7febb}{allRatesOutput}       = \textcolor{keywordtype}{None}
\hypertarget{e2e_8py_source.tex_l00031}{}\hyperlink{classe2e_1_1_parameters_aff4d7aaa35295f7f71e546fe5554c4d9}{00031}         self.\hyperlink{classe2e_1_1_parameters_aff4d7aaa35295f7f71e546fe5554c4d9}{origin}               = \textcolor{keywordtype}{None}
\hypertarget{e2e_8py_source.tex_l00032}{}\hyperlink{classe2e_1_1_parameters_ad2cdf746b8890c53a9cab6fd7df7043b}{00032}         self.\hyperlink{classe2e_1_1_parameters_ad2cdf746b8890c53a9cab6fd7df7043b}{destination}          = \textcolor{keywordtype}{None}
\hypertarget{e2e_8py_source.tex_l00033}{}\hyperlink{classe2e_1_1_parameters_acece0ee5caaa6322c3a337c3b7f00599}{00033}         self.\hyperlink{classe2e_1_1_parameters_acece0ee5caaa6322c3a337c3b7f00599}{originOutputput}      = \textcolor{keywordtype}{None}
\hypertarget{e2e_8py_source.tex_l00034}{}\hyperlink{classe2e_1_1_parameters_a3b4ae5aa9b73466e51018b6f37792577}{00034}         self.\hyperlink{classe2e_1_1_parameters_a3b4ae5aa9b73466e51018b6f37792577}{destinationOutput}    = \textcolor{keywordtype}{None}
\hypertarget{e2e_8py_source.tex_l00035}{}\hyperlink{classe2e_1_1_parameters_a363d9432d8f2bdcf645fa39b81e007f3}{00035}         self.\hyperlink{classe2e_1_1_parameters_a363d9432d8f2bdcf645fa39b81e007f3}{rawOriginOutputput}   = \textcolor{keywordtype}{None}
\hypertarget{e2e_8py_source.tex_l00036}{}\hyperlink{classe2e_1_1_parameters_a84b319098084ed505e089a600e154f6e}{00036}         self.\hyperlink{classe2e_1_1_parameters_a84b319098084ed505e089a600e154f6e}{rawDestinationOutput} = \textcolor{keywordtype}{None}
\hypertarget{e2e_8py_source.tex_l00037}{}\hyperlink{classe2e_1_1_parameters_a84d862bf507bb0325f5daf3b7e5d9ab3}{00037}         self.\hyperlink{classe2e_1_1_parameters_a84d862bf507bb0325f5daf3b7e5d9ab3}{verbose}              = \textcolor{keyword}{False}
00038 
\hypertarget{e2e_8py_source.tex_l00039}{}\hyperlink{classe2e_1_1_parameters_af904cdd913f0ffd64f28c9f7b1137389}{00039}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_af904cdd913f0ffd64f28c9f7b1137389}{setSummaryOutput} (self, summaryOutput):
00040         self.\hyperlink{classe2e_1_1_parameters_a1f4bab2e746d2c598e20ccba0154d795}{summaryOutput} = summaryOutput
00041 
\hypertarget{e2e_8py_source.tex_l00042}{}\hyperlink{classe2e_1_1_parameters_a46f3f35e99d7ce8a22fa34d66a348586}{00042}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a46f3f35e99d7ce8a22fa34d66a348586}{getSummaryOutput} (self):
00043         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_parameters_a1f4bab2e746d2c598e20ccba0154d795}{summaryOutput}
00044 
\hypertarget{e2e_8py_source.tex_l00045}{}\hyperlink{classe2e_1_1_parameters_a4ec249739947f4643b6d2dc811ef2639}{00045}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a4ec249739947f4643b6d2dc811ef2639}{setConclusionOutput} (self, conclusionOutput):
00046         self.\hyperlink{classe2e_1_1_parameters_ad5967b78ebf5c8778e423413053015a7}{conclusionOutput} = conclusionOutput
00047 
\hypertarget{e2e_8py_source.tex_l00048}{}\hyperlink{classe2e_1_1_parameters_ac4ff6b23493a25723cfe99fb7becf328}{00048}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_ac4ff6b23493a25723cfe99fb7becf328}{getConclusionOutput} (self):
00049         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_parameters_ad5967b78ebf5c8778e423413053015a7}{conclusionOutput}
00050 
\hypertarget{e2e_8py_source.tex_l00051}{}\hyperlink{classe2e_1_1_parameters_a57b1265982f14c075d2f1ab909383f5d}{00051}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a57b1265982f14c075d2f1ab909383f5d}{setMainRates} (self, mainRates):
00052         self.\hyperlink{classe2e_1_1_parameters_aaa2b41d7017ab4893bbe27fa8edb7180}{mainRates} = mainRates
00053 
\hypertarget{e2e_8py_source.tex_l00054}{}\hyperlink{classe2e_1_1_parameters_a067ce19caffb5ed5479219a911219c31}{00054}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a067ce19caffb5ed5479219a911219c31}{getMainRates} (self):
00055         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_parameters_aaa2b41d7017ab4893bbe27fa8edb7180}{mainRates}
00056 
\hypertarget{e2e_8py_source.tex_l00057}{}\hyperlink{classe2e_1_1_parameters_a764caaf0903863ccf240217b15999dc0}{00057}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a764caaf0903863ccf240217b15999dc0}{setAllRates} (self, allRates):
00058         self.\hyperlink{classe2e_1_1_parameters_a60eeea35185af8b13a6ea9d797a38dc7}{allRates} = allRates
00059 
\hypertarget{e2e_8py_source.tex_l00060}{}\hyperlink{classe2e_1_1_parameters_a73ef5c8c54974e3ce7a2a522c299fd34}{00060}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a73ef5c8c54974e3ce7a2a522c299fd34}{getAllRates} (self):
00061         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_parameters_a60eeea35185af8b13a6ea9d797a38dc7}{allRates}
00062 
\hypertarget{e2e_8py_source.tex_l00063}{}\hyperlink{classe2e_1_1_parameters_ae71495be8b331f293e0d66b3251a21e9}{00063}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_ae71495be8b331f293e0d66b3251a21e9}{setMainRatesOutput} (self, mainRatesOutput):
00064         self.\hyperlink{classe2e_1_1_parameters_a552470d8541b7caf2bb8940e32a6fe0e}{mainRatesOutput} = mainRatesOutput
00065 
\hypertarget{e2e_8py_source.tex_l00066}{}\hyperlink{classe2e_1_1_parameters_a7f42c96565591076b9ae5b06ce364bec}{00066}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a7f42c96565591076b9ae5b06ce364bec}{getMainRatesOutput} (self):
00067         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_parameters_a552470d8541b7caf2bb8940e32a6fe0e}{mainRatesOutput}
00068 
\hypertarget{e2e_8py_source.tex_l00069}{}\hyperlink{classe2e_1_1_parameters_a23a4ae20df9dbbb411654c45c5bbfa17}{00069}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a23a4ae20df9dbbb411654c45c5bbfa17}{setAllRatesOutput} (self, allRatesOutput):
00070         self.\hyperlink{classe2e_1_1_parameters_ac5dfd879a297879921d905de68f7febb}{allRatesOutput} = allRatesOutput
00071 
\hypertarget{e2e_8py_source.tex_l00072}{}\hyperlink{classe2e_1_1_parameters_af47d493a07f5127e633d5efccb5fac5e}{00072}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_af47d493a07f5127e633d5efccb5fac5e}{getAllRatesOutput} (self):
00073         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_parameters_ac5dfd879a297879921d905de68f7febb}{allRatesOutput}
00074 
\hypertarget{e2e_8py_source.tex_l00075}{}\hyperlink{classe2e_1_1_parameters_a421e56e53ff0aaf5222229d8a81c456b}{00075}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a421e56e53ff0aaf5222229d8a81c456b}{setOrigin} (self, origin):
00076         self.\hyperlink{classe2e_1_1_parameters_aff4d7aaa35295f7f71e546fe5554c4d9}{origin} = origin
00077 
\hypertarget{e2e_8py_source.tex_l00078}{}\hyperlink{classe2e_1_1_parameters_ac570cc2f199bcb82a4634be79110a013}{00078}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_ac570cc2f199bcb82a4634be79110a013}{getOrigin} (self):
00079         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_parameters_aff4d7aaa35295f7f71e546fe5554c4d9}{origin}
00080 
\hypertarget{e2e_8py_source.tex_l00081}{}\hyperlink{classe2e_1_1_parameters_ac63ae6d2b5f45ae78ee855953a038f14}{00081}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_ac63ae6d2b5f45ae78ee855953a038f14}{setDestination} (self, destination):
00082         self.\hyperlink{classe2e_1_1_parameters_ad2cdf746b8890c53a9cab6fd7df7043b}{destination} = destination
00083 
\hypertarget{e2e_8py_source.tex_l00084}{}\hyperlink{classe2e_1_1_parameters_ad984826a5973fff569b554b44245b714}{00084}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_ad984826a5973fff569b554b44245b714}{getDestination} (self):
00085         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_parameters_ad2cdf746b8890c53a9cab6fd7df7043b}{destination}
00086 
\hypertarget{e2e_8py_source.tex_l00087}{}\hyperlink{classe2e_1_1_parameters_a2b87a3357a16d35b7606a97e924a4904}{00087}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a2b87a3357a16d35b7606a97e924a4904}{setOriginOutput} (self, originOutput ):
\hypertarget{e2e_8py_source.tex_l00088}{}\hyperlink{classe2e_1_1_parameters_ab1ac2fc0ab2f3ef169b776c776cdb225}{00088}         self.\hyperlink{classe2e_1_1_parameters_ab1ac2fc0ab2f3ef169b776c776cdb225}{originOutput}  = originOutput 
00089 
\hypertarget{e2e_8py_source.tex_l00090}{}\hyperlink{classe2e_1_1_parameters_af0cdd8e6726ccc72387e466c2abe04c2}{00090}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_af0cdd8e6726ccc72387e466c2abe04c2}{getOriginOutput} (self):
00091         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_parameters_ab1ac2fc0ab2f3ef169b776c776cdb225}{originOutput} 
00092 
\hypertarget{e2e_8py_source.tex_l00093}{}\hyperlink{classe2e_1_1_parameters_a96083de53012ca50d2a345a1673802de}{00093}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a96083de53012ca50d2a345a1673802de}{setDestinationOutput} (self, destinationOutput):
00094         self.\hyperlink{classe2e_1_1_parameters_a3b4ae5aa9b73466e51018b6f37792577}{destinationOutput} = destinationOutput 
00095 
\hypertarget{e2e_8py_source.tex_l00096}{}\hyperlink{classe2e_1_1_parameters_a4451a6d8224c2216fdef8e53e55fadaf}{00096}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a4451a6d8224c2216fdef8e53e55fadaf}{getDestinationOutput} (self):
00097         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_parameters_a3b4ae5aa9b73466e51018b6f37792577}{destinationOutput}
00098         
\hypertarget{e2e_8py_source.tex_l00099}{}\hyperlink{classe2e_1_1_parameters_a6a69b8936b79b34f612b3dda7bedc67f}{00099}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a6a69b8936b79b34f612b3dda7bedc67f}{setRawOriginOutput} (self, rawOriginOutput):
\hypertarget{e2e_8py_source.tex_l00100}{}\hyperlink{classe2e_1_1_parameters_a62b586d9863422872833e34814ac51e6}{00100}         self.\hyperlink{classe2e_1_1_parameters_a62b586d9863422872833e34814ac51e6}{rawOriginOutput} = rawOriginOutput
00101 
\hypertarget{e2e_8py_source.tex_l00102}{}\hyperlink{classe2e_1_1_parameters_a4ed96c7861e649d101984ff5c8056691}{00102}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a4ed96c7861e649d101984ff5c8056691}{getRawOriginOutput} (self):
00103         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_parameters_a62b586d9863422872833e34814ac51e6}{rawOriginOutput} 
00104 
\hypertarget{e2e_8py_source.tex_l00105}{}\hyperlink{classe2e_1_1_parameters_a2a4420c79bef43533fe2d9562d0faedb}{00105}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a2a4420c79bef43533fe2d9562d0faedb}{setRawDestinationOutput} (self, rawDestinationOutput):
00106         self.\hyperlink{classe2e_1_1_parameters_a84b319098084ed505e089a600e154f6e}{rawDestinationOutput} = rawDestinationOutput 
00107 
\hypertarget{e2e_8py_source.tex_l00108}{}\hyperlink{classe2e_1_1_parameters_a0536c6870c6371025927f435e47704ed}{00108}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a0536c6870c6371025927f435e47704ed}{getRawDestinationOutput} (self):
00109         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_parameters_a84b319098084ed505e089a600e154f6e}{rawDestinationOutput} 
00110 
\hypertarget{e2e_8py_source.tex_l00111}{}\hyperlink{classe2e_1_1_parameters_a9d1ef6cf9aaac08105966db43687423f}{00111}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a9d1ef6cf9aaac08105966db43687423f}{setVerbose} (self, verbose):
00112         self.\hyperlink{classe2e_1_1_parameters_a84d862bf507bb0325f5daf3b7e5d9ab3}{verbose} = verbose
00113 
\hypertarget{e2e_8py_source.tex_l00114}{}\hyperlink{classe2e_1_1_parameters_a1e5e7e1986b641b01d4c24690a6d48eb}{00114}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_parameters_a1e5e7e1986b641b01d4c24690a6d48eb}{getVerbose} (self):
00115         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_parameters_a84d862bf507bb0325f5daf3b7e5d9ab3}{verbose}
00116         
\hypertarget{e2e_8py_source.tex_l00117}{}\hyperlink{classe2e_1_1_application}{00117} \textcolor{keyword}{class }\hyperlink{classe2e_1_1_application}{Application}:
\hypertarget{e2e_8py_source.tex_l00118}{}\hyperlink{classe2e_1_1_application_a2267bd2e8d3114095e6271aed7f8c8c9}{00118}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_application_a2267bd2e8d3114095e6271aed7f8c8c9}{\_\_init\_\_} (self):
00119         d = datetime.datetime.now ()
\hypertarget{e2e_8py_source.tex_l00120}{}\hyperlink{classe2e_1_1_application_a4d824ad36b051d2d629edb314385df0d}{00120}         self.\hyperlink{classe2e_1_1_application_a4d824ad36b051d2d629edb314385df0d}{suffix} = d.strftime (\textcolor{stringliteral}{'%Y%m%d\_%H%M'})
\hypertarget{e2e_8py_source.tex_l00121}{}\hyperlink{classe2e_1_1_application_a027ff25e5409ae17584978a09fc2611a}{00121}         self.\hyperlink{classe2e_1_1_application_a027ff25e5409ae17584978a09fc2611a}{prefix} = \textcolor{stringliteral}{'e2e'}
\hypertarget{e2e_8py_source.tex_l00122}{}\hyperlink{classe2e_1_1_application_a57206c6ccc86c2659edfd8d73d2029f3}{00122}         self.\hyperlink{classe2e_1_1_application_a57206c6ccc86c2659edfd8d73d2029f3}{params} = \textcolor{keywordtype}{None}
00123     
\hypertarget{e2e_8py_source.tex_l00124}{}\hyperlink{classe2e_1_1_application_a91b8b6df6456d27bed503849ffcdcc77}{00124}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_application_a91b8b6df6456d27bed503849ffcdcc77}{parseCmdLine} (self):
00125         desc = \textcolor{stringliteral}{'Compare two exchanges for a round operation'}
00126         parser = argparse.ArgumentParser (description = desc)
00127         
00128         desc = \textcolor{stringliteral}{'Summary report (Default is stdout)'} 
00129         parser.add\_argument (\textcolor{stringliteral}{'-s'}, \textcolor{stringliteral}{'--summary'}, required = \textcolor{keyword}{False},
00130                              help = desc)
00131         desc = \textcolor{stringliteral}{'File name for the conclusion of the arbitrage'}
00132         parser.add\_argument (\textcolor{stringliteral}{'-c'}, \textcolor{stringliteral}{'--conclusion'}, required = \textcolor{keyword}{True},
00133                              help = desc)
00134         parser.add\_argument (\textcolor{stringliteral}{'-m'}, \textcolor{stringliteral}{'--main'}, metavar = \textcolor{stringliteral}{"RATES"}, 
00135                              default = \textcolor{stringliteral}{'Google'},
00136                              help = \textcolor{stringliteral}{'Main rate service'})
00137 \textcolor{comment}{#        parser.add\_argument ('-a', '--alternative', metavar = "RATES",}
00138 \textcolor{comment}{#                             default = 'XRates',}
00139 \textcolor{comment}{#                             help = 'Alternative rate service')}
00140         parser.add\_argument (\textcolor{stringliteral}{'--origin'}, \textcolor{stringliteral}{'-o'}, metavar = \textcolor{stringliteral}{"EXCHANGE"},
00141                              required = \textcolor{keyword}{True},
00142                              help = \textcolor{stringliteral}{'Origin exchange'})
00143         parser.add\_argument (\textcolor{stringliteral}{'-d'}, \textcolor{stringliteral}{'--destination'}, metavar = \textcolor{stringliteral}{"EXCHANGE"},
00144                              required = \textcolor{keyword}{True},
00145                              help = \textcolor{stringliteral}{'Destination exchange'})
00146         parser.add\_argument (\textcolor{stringliteral}{'-v'}, \textcolor{stringliteral}{'--verbose'}, action = \textcolor{stringliteral}{"store\_true"},
00147                              help = \textcolor{stringliteral}{'Increase output verbosity'})
00148                              
00149         args = parser.parse\_args ()
00150         
00151         \textcolor{comment}{# TODO complete the copy of cmdline parameters}
00152         
00153         result = Args ()
00154         result.summary     = args.summary 
00155         result.conclusion  = args.conclusion 
00156         result.mainRates   = args.main 
00157 \textcolor{comment}{#        result.altRates    = args.alternative }
00158         result.origin      = args.origin 
00159         result.destination = args.destination 
00160         result.verbose     = args.verbose
00161         
\hypertarget{e2e_8py_source.tex_l00162}{}\hyperlink{classe2e_1_1_application_abade6fc2e2c04ddd7e48137a2a7721bd}{00162}         self.\hyperlink{classe2e_1_1_application_abade6fc2e2c04ddd7e48137a2a7721bd}{args} = result
00163         
00164         \textcolor{comment}{# Normal function termination}
00165         \textcolor{keywordflow}{return} result
00166         
\hypertarget{e2e_8py_source.tex_l00167}{}\hyperlink{classe2e_1_1_application_ae7b9559aa388f8178300fb4d7a9f9257}{00167}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_application_ae7b9559aa388f8178300fb4d7a9f9257}{interpretArgs} (self):
00168         result = Parameters ()
00169         
00170         \textcolor{comment}{# Open summary file}
00171         \textcolor{keywordflow}{if} self.args.summary == \textcolor{keywordtype}{None}:
00172             \textcolor{keywordflow}{try}:
00173                 sum\_nam =  self.\hyperlink{classe2e_1_1_application_a027ff25e5409ae17584978a09fc2611a}{prefix} + \textcolor{stringliteral}{'\_'} + self.\hyperlink{classe2e_1_1_application_a4d824ad36b051d2d629edb314385df0d}{suffix} + \textcolor{stringliteral}{'.sum'}
00174                 sum\_f = open (sum\_nam, \textcolor{stringliteral}{'w'})
00175                 
00176             \textcolor{keywordflow}{except} IOError:
00177                 \textcolor{comment}{# TODO an application specific msg here}
00178                 \textcolor{keywordflow}{raise}
00179         \textcolor{keywordflow}{else}:
00180             sum\_f = sys.\_\_stdout\_\_
00181             
00182         result.setSummaryOutput (sum\_f)
00183             
00184         \textcolor{comment}{# TODO Open output files for destination exchange}
00185         \textcolor{keywordflow}{try}:
00186             cnc\_nam  =  self.\hyperlink{classe2e_1_1_application_a027ff25e5409ae17584978a09fc2611a}{prefix} + \textcolor{stringliteral}{'\_conclusion'}
00187             cnc\_nam += \textcolor{stringliteral}{'\_'} + self.\hyperlink{classe2e_1_1_application_a4d824ad36b051d2d629edb314385df0d}{suffix} + \textcolor{stringliteral}{'.json'}
00188             cnc\_f = open (cnc\_nam, \textcolor{stringliteral}{'w'})
00189             
00190         \textcolor{keywordflow}{except} IOError:
00191             \textcolor{comment}{# TODO an application specific msg here}
00192             \textcolor{keywordflow}{raise}
00193             
00194         result.setConclusionOutput (cnc\_f)
00195             
00196         \textcolor{comment}{# TODO confirm that destinatian and origin exchanges are not equal}
00197         args = self.\hyperlink{classe2e_1_1_application_abade6fc2e2c04ddd7e48137a2a7721bd}{args} 
00198         \textcolor{keywordflow}{if} args.origin == args.destination:
00199             fmt = \textcolor{stringliteral}{'ERROR: Origin exchange \{0\} equal to destination \{1\}'}
00200             msg = fmt.format (args.origin, args.destination)
00201             \textcolor{keywordflow}{raise} Exception (msg)
00202 
00203         \textcolor{comment}{# TODO get exchange names }
00204         gfExchange = \hyperlink{classgen__factory_1_1_gen_factory}{gen\_factory.GenFactory} (
      \hyperlink{classexchange_1_1_exchange}{exchange.Exchange})
00205         exch\_names = gfExchange.validClassNames ()
00206             
00207         \textcolor{comment}{# TODO validate destination exchange}
00208         \textcolor{keywordflow}{if} args.destination \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} exch\_names:
00209             fmt  = \textcolor{stringliteral}{'ERROR: Destination exchange \{0\} is not a valid '}
00210             fmt += \textcolor{stringliteral}{'exchange name.\(\backslash\)n'}
00211             fmt += \textcolor{stringliteral}{'\(\backslash\)tShould be one of \{1\}'}
00212             msg = fmt.format (args.destination, exch\_names)
00213             \textcolor{keywordflow}{raise} Exception (msg)
00214             
00215         \textcolor{comment}{# TODO validate origin exchange}
00216         \textcolor{keywordflow}{if} args.origin \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} exch\_names:
00217             fmt  = \textcolor{stringliteral}{'ERROR: Origin exchange \{0\} is not a valid exchange name.\(\backslash\)n'}
00218             fmt += \textcolor{stringliteral}{'\(\backslash\)tShould be one of \{1\}'}
00219             msg = fmt.format (args.origin, exch\_names)
00220             \textcolor{keywordflow}{raise} Exception (msg)
00221         
00222         \textcolor{comment}{# TODO open connection with destination exchange}
00223         dstExchange = gfExchange.genObject (args.destination)
00224         result.setDestination (dstExchange)
00225             
00226         \textcolor{comment}{# TODO Open output files for destination exchange}
00227         \textcolor{keywordflow}{try}:
00228             dst\_nam  =  self.\hyperlink{classe2e_1_1_application_a027ff25e5409ae17584978a09fc2611a}{prefix} + \textcolor{stringliteral}{'\_'} + dstExchange.get\_exch\_prefix ()
00229             dst\_nam += \textcolor{stringliteral}{'\_'} + self.\hyperlink{classe2e_1_1_application_a4d824ad36b051d2d629edb314385df0d}{suffix} + \textcolor{stringliteral}{'.json'}
00230             e2e\_dst\_f = open (dst\_nam, \textcolor{stringliteral}{'w'})
00231             
00232         \textcolor{keywordflow}{except} IOError:
00233             \textcolor{comment}{# TODO an application specific msg here}
00234             \textcolor{keywordflow}{raise}
00235             
00236         result.setDestinationOutput (e2e\_dst\_f)
00237             
00238         \textcolor{keywordflow}{try}:
00239             dst\_nam  = dstExchange.get\_exch\_prefix ()
00240             dst\_nam += \textcolor{stringliteral}{'\_'} + self.\hyperlink{classe2e_1_1_application_a4d824ad36b051d2d629edb314385df0d}{suffix} + \textcolor{stringliteral}{'.json'}
00241             dst\_f = open (dst\_nam, \textcolor{stringliteral}{'w'})
00242             
00243         \textcolor{keywordflow}{except} IOError:
00244             \textcolor{comment}{# TODO an application specific msg here}
00245             \textcolor{keywordflow}{raise}
00246             
00247         result.setRawDestinationOutput (dst\_f)
00248             
00249         \textcolor{comment}{# TODO open connection with origin exchange}
00250         orgExchange = gfExchange.genObject (args.origin)
00251         result.setOrigin (orgExchange)
00252             
00253         \textcolor{comment}{# TODO Open output files for origin exchange}
00254         \textcolor{keywordflow}{try}:
00255             org\_nam  =  self.\hyperlink{classe2e_1_1_application_a027ff25e5409ae17584978a09fc2611a}{prefix} + \textcolor{stringliteral}{'\_'} + orgExchange.get\_exch\_prefix ()
00256             org\_nam += \textcolor{stringliteral}{'\_'} + self.\hyperlink{classe2e_1_1_application_a4d824ad36b051d2d629edb314385df0d}{suffix} + \textcolor{stringliteral}{'.json'}
00257             e2e\_org\_f = open (org\_nam, \textcolor{stringliteral}{'w'})
00258             
00259         \textcolor{keywordflow}{except} IOError:
00260             \textcolor{comment}{# TODO an application specific2 msg here}
00261             \textcolor{keywordflow}{raise}
00262 
00263         result.setOriginOutput (e2e\_org\_f)
00264             
00265         \textcolor{keywordflow}{try}:
00266             org\_nam  = orgExchange.get\_exch\_prefix ()
00267             org\_nam += \textcolor{stringliteral}{'\_'} + self.\hyperlink{classe2e_1_1_application_a4d824ad36b051d2d629edb314385df0d}{suffix} + \textcolor{stringliteral}{'.json'}
00268             org\_f = open (org\_nam, \textcolor{stringliteral}{'w'})
00269             
00270         \textcolor{keywordflow}{except} IOError:
00271             \textcolor{comment}{# TODO an application specific msg here}
00272             \textcolor{keywordflow}{raise}
00273             
00274         result.setRawOriginOutput (org\_f)
00275             
00276         \textcolor{comment}{# TODO open connection with main rate service}
00277         gfRates = \hyperlink{classgen__factory_1_1_gen_factory}{gen\_factory.GenFactory} (\hyperlink{classrates_1_1_rates}{rates.Rates})
00278         rates\_names = gfRates.validClassNames ()
00279 
00280         \textcolor{comment}{# TODO validate main rate service}
00281         \textcolor{keywordflow}{if} args.mainRates \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} rates\_names:
00282             fmt  = \textcolor{stringliteral}{'ERROR: Main rates service \{0\} is not a valid rates name.\(\backslash\)n'}
00283             fmt += \textcolor{stringliteral}{'\(\backslash\)tShould be one of \{1\}'}
00284             msg = fmt.format (args.mainRates, rates\_names)
00285             \textcolor{keywordflow}{raise} Exception (msg)
00286 
00287         mainRates = gfRates.genObject (args.mainRates)
00288         result.setMainRates (mainRates)
00289         
00290         \textcolor{comment}{# TODO Open output file for main rate service}
00291         \textcolor{keywordflow}{try}:
00292             rat\_nam  =  mainRates.getServicePrefix () + \textcolor{stringliteral}{'\_'}
00293             rat\_nam +=  self.\hyperlink{classe2e_1_1_application_a4d824ad36b051d2d629edb314385df0d}{suffix} + \textcolor{stringliteral}{'.rat'}
00294             rat\_f = open (rat\_nam, \textcolor{stringliteral}{'w'})
00295             
00296         \textcolor{keywordflow}{except} IOError:
00297             \textcolor{comment}{# TODO an application specific msg here}
00298             \textcolor{keywordflow}{raise}        
00299 
00300         result.setMainRatesOutput (rat\_f)
00301             
00302         \textcolor{comment}{# TODO open connections with auxiliary rate services}
00303         allRatesNames = []        
00304         \textcolor{keywordflow}{for} rateName \textcolor{keywordflow}{in} rates\_names:
00305 \textcolor{comment}{#            if rateName == args.mainRates:}
00306 \textcolor{comment}{#                continue }
00307             
00308             allRatesNames.append (rateName)
00309 
00310         result.allRates = []            
00311         \textcolor{keywordflow}{for} rateName \textcolor{keywordflow}{in} allRatesNames:
00312             result.allRates.append (gfRates.genObject (rateName))
00313             
00314         \textcolor{keywordflow}{try}:
00315             allrat\_nam  =  \textcolor{stringliteral}{'all\_rates'} + \textcolor{stringliteral}{'\_'}
00316             allrat\_nam +=  self.\hyperlink{classe2e_1_1_application_a4d824ad36b051d2d629edb314385df0d}{suffix} + \textcolor{stringliteral}{'.rat'}
00317             allrat\_f = open (allrat\_nam, \textcolor{stringliteral}{'w'})
00318             
00319         \textcolor{keywordflow}{except} IOError:
00320             \textcolor{comment}{# TODO an application specific msg here}
00321             \textcolor{keywordflow}{raise}        
00322 
00323         result.setAllRatesOutput (allrat\_f)
00324         
00325         args = self.\hyperlink{classe2e_1_1_application_abade6fc2e2c04ddd7e48137a2a7721bd}{args} 
00326         
00327         self.\hyperlink{classe2e_1_1_application_a57206c6ccc86c2659edfd8d73d2029f3}{params} = result
00328                
00329         \textcolor{keywordflow}{if} args.verbose:            
00330             \textcolor{keywordflow}{print} (\textcolor{stringliteral}{'Verbose output enabled'})
00331             
00332             \textcolor{keywordflow}{print} (\textcolor{stringliteral}{'Main rate service: \{0\}'}.format (args.mainRates))
00333             \textcolor{keywordflow}{print} (\textcolor{stringliteral}{'Exchanges'})
00334             \textcolor{keywordflow}{print} (\textcolor{stringliteral}{'Origin:            \{0\}'}.format (args.origin))
00335             \textcolor{keywordflow}{print} (\textcolor{stringliteral}{'Destination:       \{0\}'}.format (args.destination))
00336             
00337         \textcolor{comment}{# Normal function termination }
00338         \textcolor{keywordflow}{return} result 
00339         
\hypertarget{e2e_8py_source.tex_l00340}{}\hyperlink{classe2e_1_1_application_ae7bc7b58f19d681635cfa8ae06d9769b}{00340}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_application_ae7bc7b58f19d681635cfa8ae06d9769b}{getParameters} (self): 
00341         \textcolor{keywordflow}{return} self.\hyperlink{classe2e_1_1_application_a57206c6ccc86c2659edfd8d73d2029f3}{params}
00342             
\hypertarget{e2e_8py_source.tex_l00343}{}\hyperlink{classe2e_1_1_application_a3e33fd00d85637393d48ea3f7dbd95c7}{00343}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_application_a3e33fd00d85637393d48ea3f7dbd95c7}{outMainRates} (self):
00344         params = self.\hyperlink{classe2e_1_1_application_ae7bc7b58f19d681635cfa8ae06d9769b}{getParameters} ()
00345         mainRates = params.getMainRates ()
00346         outFile = params.getMainRatesOutput ()
00347         line = str (mainRates) + \textcolor{stringliteral}{"\(\backslash\)n"}
00348         outFile.write (line)
00349         
00350         outFile.close ()
00351     
\hypertarget{e2e_8py_source.tex_l00352}{}\hyperlink{classe2e_1_1_application_acd7798aa633d75001b6f6fde556b8a51}{00352}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_application_acd7798aa633d75001b6f6fde556b8a51}{outAllRates} (self):
00353         params = self.\hyperlink{classe2e_1_1_application_ae7bc7b58f19d681635cfa8ae06d9769b}{getParameters} ()
00354         allRates = params.getAllRates ()
00355         outFile = params.getAllRatesOutput ()
00356         \textcolor{keywordflow}{for} theseRates \textcolor{keywordflow}{in} allRates:
00357             line = str (theseRates) + \textcolor{stringliteral}{"\(\backslash\)n"}
00358             outFile.write (line)
00359         
00360         outFile.close ()
00361     
\hypertarget{e2e_8py_source.tex_l00362}{}\hyperlink{classe2e_1_1_application_adfad90d64cddb8d751961202264ca489}{00362}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_application_adfad90d64cddb8d751961202264ca489}{outOriginExchange} (self):
00363         params = self.\hyperlink{classe2e_1_1_application_ae7bc7b58f19d681635cfa8ae06d9769b}{getParameters} ()
00364         
00365         \textcolor{comment}{# Get origin exchange data}
00366         origin = params.getOrigin ()
00367         origin.get\_ticker ()
00368         ticker = origin.mk\_ticker ()
00369 
00370         \textcolor{comment}{# Output raw exchange data}
00371         outFile = params.getRawOriginOutput ()
00372         line = str (origin.getOriginalTicker ()) + \textcolor{stringliteral}{"\(\backslash\)n"}
00373         outFile.write (line)
00374         
00375         outFile.close ()
00376     
00377         \textcolor{comment}{# TODO output e2e exchange data}
00378         outFile = params.getOriginOutput ()
00379         line = str (ticker.dumps ()) + \textcolor{stringliteral}{"\(\backslash\)n"}
00380         outFile.write (line)
00381         
00382         outFile.close ()
00383     
00384         \textcolor{comment}{# Normal function termination }
00385         \textcolor{keywordflow}{return} 
00386     
\hypertarget{e2e_8py_source.tex_l00387}{}\hyperlink{classe2e_1_1_application_a1b099bee6f8170c4c52e7ae884d95b27}{00387}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_application_a1b099bee6f8170c4c52e7ae884d95b27}{outDestinationExchange} (self):
00388         params = self.\hyperlink{classe2e_1_1_application_ae7bc7b58f19d681635cfa8ae06d9769b}{getParameters} ()
00389         
00390         \textcolor{comment}{# Get origin exchange data}
00391         destination = params.getDestination ()
00392         destination.get\_ticker ()
00393         ticker = destination.mk\_ticker ()
00394 
00395         \textcolor{comment}{# Output raw exchange data}
00396         outFile = params.getRawDestinationOutput ()
00397         line = str (destination.getOriginalTicker ()) + \textcolor{stringliteral}{"\(\backslash\)n"}
00398         outFile.write (line)
00399         
00400         outFile.close ()
00401     
00402         \textcolor{comment}{# TODO output e2e exchange data}
00403         outFile = params.getDestinationOutput ()
00404         line = str (ticker.dumps ()) + \textcolor{stringliteral}{"\(\backslash\)n"}
00405         outFile.write (line)
00406         
00407         outFile.close ()
00408     
00409         \textcolor{comment}{# Normal function termination }
00410         \textcolor{keywordflow}{return} 
00411     
\hypertarget{e2e_8py_source.tex_l00412}{}\hyperlink{classe2e_1_1_application_a72b854da6d69dbcb5031f24dccf9cc71}{00412}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_application_a72b854da6d69dbcb5031f24dccf9cc71}{genExpectations} (self):
00413         \textcolor{keywordflow}{pass}
00414     
\hypertarget{e2e_8py_source.tex_l00415}{}\hyperlink{classe2e_1_1_application_a0f753699fabab3ae17407b36404d3b64}{00415}     \textcolor{keyword}{def }\hyperlink{classe2e_1_1_application_a0f753699fabab3ae17407b36404d3b64}{genOutput} (self):
00416         \textcolor{keywordflow}{pass}
00417 
\hypertarget{e2e_8py_source.tex_l00418}{}\hyperlink{namespacee2e_afb3e7d384688a07b72e1df5201192375}{00418} \textcolor{keyword}{def }\hyperlink{namespacee2e_afb3e7d384688a07b72e1df5201192375}{main} (argv):
00419     app = Application ()
00420     
00421     \textcolor{comment}{# TODO parse command line }
00422     \textcolor{comment}{# TODO catch exception}
00423     \textcolor{comment}{# TODO return according to error}
00424     app.parseCmdLine ()
00425     
00426     \textcolor{comment}{# TODO interpret command line }
00427     \textcolor{comment}{# TODO catch exception}
00428     \textcolor{comment}{# TODO return according to error}
00429     app.interpretArgs ()
00430     
00431     \textcolor{comment}{# TODO consult main rate service}
00432     app.outMainRates ()
00433     
00434     \textcolor{comment}{# TODO consult all rate services}
00435     app.outAllRates ()
00436     
00437     \textcolor{comment}{# TODO consult origin exchange }
00438     app.outOriginExchange ()
00439     
00440     \textcolor{comment}{# TODO consult destination exchange}
00441     app.outDestinationExchange ()
00442     
00443     \textcolor{comment}{# TODO generate expectations}
00444     
00445     \textcolor{comment}{# TODO generate output report and JSON files}
00446 
00447     \textcolor{comment}{# Normal function termination}
00448     \textcolor{keywordflow}{return} 0
00449 
00450 \textcolor{keywordflow}{if} \_\_name\_\_ == \textcolor{stringliteral}{'\_\_main\_\_'}:
00451     sys.exit (main (sys.argv))
\end{DoxyCode}
